#:kivy 1.0
# Primary Mirror Control GUI:
<PMC_GUI>:
    cols: 1
    # Top half is for inputs.
    Label:
        id: title_label
        text: "PRIMARY MIRROR CONTROL"
        bold: True
        size_hint_y: None
        height: 30
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height
    GridLayout:
        cols: 2
        GridLayout:
            cols: 1
            id: tip_tilt_ctrl
            size_hint_x: None
            width: 400
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1 #blue
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
            Label:
                text: "TIP/TILT"
                size_hint_y: None
                height: 30
            GridLayout:
                cols: 2
                GridLayout:
                    cols: 1
                    padding: [10, 10, 10, 10]
                    # canvas.before:
                    #     Color:
                    #         rgba: 0, 1, 1, 1 #cyan
                    #     Line:
                    #         width: 2
                    #         rectangle: self.x, self.y, self.width, self.height
                    GridLayout:
                        cols: 3
                        #______________
                        Label:
                        Button:
                            text: '+ Tip'
                            size_hint_y: None
                            height: 40
                            size_hint_x: None
                            width: 50
                            on_press: root.doSomething()
                        Label:
                        #______________
                        Button:
                            text: '- Tilt'
                            size_hint_y: None
                            height: 40
                            size_hint_x: None
                            width: 50
                            on_press: root.doSomething()
                        Label: # Would like to put an indicator light here.
                        Button:
                            text: '+ Tilt'
                            size_hint_y: None
                            height: 40
                            size_hint_x: None
                            width: 50
                            on_press: root.doSomething()
                        #______________
                        Label:
                        Button:
                            text: '- Tip'
                            size_hint_y: None
                            height: 40
                            size_hint_x: None
                            width: 50
                            on_press: root.doSomething()
                        Label:
                        #______________
                        Label:
                        Label:
                        Label:
                        #______________
                    Label:
                        text: "Tip/Tilt Step Size [urad]:"
                        size_hint_y:None
                        height: 20
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: 40
                        # canvas.before:
                        #     Color:
                        #         rgba: 0, 1, 0, 1 #green
                        #     Line:
                        #         width: 2
                        #         rectangle: self.x, self.y, self.width, self.height
                        Button:
                            text: '1'
                            size_hint_y: None
                            height: 30
                            # size_hint_x: None
                            # width: 40
                        Button:
                            text: '10'
                            size_hint_y: None
                            height: 30
                            # size_hint_x: None
                            # width: 40
                        Button:
                            text: '100'
                            size_hint_y: None
                            height: 30
                            # size_hint_x: None
                            # width: 40
                        Button:
                            text: '1000'
                            size_hint_y: None
                            height: 30
                            # size_hint_x: None
                            # width: 40
                GridLayout:
                    cols: 1
                    padding: [10, 10, 10, 10]
                    # canvas.before:
                    #     Color:
                    #         rgba: 1, 1, 0, 1 #yellow
                    #     Line:
                    #         width: 2
                    #         rectangle: self.x, self.y, self.width, self.height
                    GridLayout:
                        cols: 3
                        Label:
                        Button:
                            text: '+Focus'
                            size_hint_y: None
                            height: 40
                        Label:
                        Label:
                        Button:
                            text: '-Focus'
                            size_hint_y: None
                            height: 40
                        Label:
                        Label:
                        Label:
                        Label:
                    Label:
                        text: "Focus Step Size [um]:"
                        size_hint_y:None
                        height: 20
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: 40
                        # canvas.before:
                        #     Color:
                        #         rgba: 0, 1, 0, 1 #green
                        #     Line:
                        #         width: 2
                        #         rectangle: self.x, self.y, self.width, self.height
                        Button:
                            text: '1'
                            size_hint_y: None
                            height: 30
                        Button:
                            text: '10'
                            size_hint_y: None
                            height: 30
                            # size_hint: .25, .2
                        Button:
                            text: '100'
                            size_hint_y: None
                            height: 30
                            # size_hint: .25, .2
                        Button:
                            text: '1000'
                            size_hint_y: None
                            height: 30
                            # size_hint: .25, .2
                    #_________________
        GridLayout:
            cols: 1
            id: vector_ctrl
            canvas.before:
                Color:
                    rgba: 1, 1, 1, 1
                Line:
                    width: 2
                    rectangle: self.x, self.y, self.width, self.height
            Label:
                text: "VECTOR"
                size_hint_y: None
                height: 30
            Label:
                text: "(Not yet implemented)"
                size_hint_y: None
                height: 30
            GridLayout:
                cols: 2
                row_force_default: True
                row_default_height: 30
                padding: [10, 10, 10, 10]
                # canvas.before:
                #     Color:
                #         rgba: 0, 1, 0, 1 #green
                #     Line:
                #         width: 2
                #         rectangle: self.x, self.y, self.width, self.height
                Label:
                    text: "X: "
                    size_hint_x: None
                    width: 30
                TextInput:
                    id: x_val
                    multiline: 'false'
                    disabled: True
                Label:
                    text: "Y: "
                    size_hint_x: None
                    width: 30
                TextInput:
                    id: y_val
                    multiline: 'false'
                    disabled: True
                Label:
                    text: "Z: "
                    size_hint_x: None
                    width: 30
                TextInput:
                    id: z_val
                    multiline: 'false'
                    disabled: True
                Label:
                    size_hint_x: None
                    width: 30
                Button:
                    text: 'Apply'
                    disabled: True
    TerminalWidget:

        id: app_term
        label: 'Terminal'
            # size_hint :1,1
            # TextInput:
            #     id: app_term
                # disabled: True

<TerminalWidget>:
    cols: 1
    padding: [5, 5, 5, 5]
    term_id: terminal
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Line:
            width: 2
            rectangle: self.x, self.y, self.width, self.height
    Label:
        text: root.label
        size_hint_y: None
        height: 20
    ScrollView:
        id: scrlv
        TextInput:
            id: terminal
            multiline: True
            size_hint: 1,None
            height: max( (len(self._lines)+1) * self.line_height, scrlv.height)
            disabled: True
            text: root.text
            foreground_color: ( 0, 0, 0, 1)
